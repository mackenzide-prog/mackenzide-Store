<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Bendy and the Ink Machine</title>
  <style>
    body {
      background-color: #111;
      color: white;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }

    .container {
      width: 90%;
      max-width: 1100px;
      margin: 30px auto;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .rating {
      color: #ccc;
      font-size: 1rem;
      margin-bottom: 20px;
    }

    .slider {
      position: relative;
      background-color: #000;
      border-radius: 10px;
      overflow: hidden;
    }

    .slider-content {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 500px;
    }

    iframe, video, img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      border: none;
    }

    .prev, .next {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(0, 0, 0, 0.5);
      border: none;
      color: white;
      font-size: 2rem;
      cursor: pointer;
      z-index: 10;
      padding: 10px 15px;
      border-radius: 50%;
    }

    .prev:hover, .next:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .prev { left: 10px; }
    .next { right: 10px; }

    .thumbnails {
      display: flex;
      justify-content: center;
      margin-top: 10px;
      gap: 8px;
      overflow-x: auto;
      scrollbar-width: thin;
    }

    .thumbnail {
      width: 120px;
      height: 70px;
      border: 2px solid transparent;
      border-radius: 6px;
      overflow: hidden;
      cursor: pointer;
      flex-shrink: 0;
      background-color: #222;
    }

    .thumbnail img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .thumbnail.active {
      border-color: #e91e63;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Bendy and the Ink Machine</h1>
    <p class="rating">★ 4.6 | Muy recomendable</p>

    <div class="slider">
      <button class="prev">❮</button>
      <div class="slider-content" id="slider-content"></div>
      <button class="next">❯</button>
    </div>

    <div class="thumbnails" id="thumbnails"></div>
  </div>

  <script>
    const data = {
      imagenes: [
        { num: 1, page: "https://www.youtube.com/watch?v=7c_xdTnVPos" },
        { num: 2, page: "https://video.akamai.steamstatic.com/store_trailers/256679401/movie480.webm?t=1497589417" },
        { num: 3, page: "https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/622650/31876c3b562d5837a263b81dd505ae45c9dfce2e/ss_31876c3b562d5837a263b81dd505ae45c9dfce2e.1920x1080.jpg" },
        { num: 4, page: "https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/622650/06e9f7d9f6acb550afc423b2cde48160633db805/ss_06e9f7d9f6acb550afc423b2cde48160633db805.1920x1080.jpg"},
        { num: 5, page: "https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/622650/da64295055cc7247e8a2dbe631e0e9d134e718c9/ss_da64295055cc7247e8a2dbe631e0e9d134e718c9.1920x1080.jpg"}
      ]
    };

    let index = 0;
    const sliderContent = document.getElementById('slider-content');
    const thumbnails = document.getElementById('thumbnails');

    function isVideo(url) {
      return /\.(mp4|webm|ogg)$/i.test(url) ||
        url.includes("youtube.com") || url.includes("youtu.be") ||
        url.includes("ok.ru") || url.includes("streamtape") ||
        url.includes("streamwish") || url.includes("mega.nz") ||
        url.includes("steamstatic.com/store_trailers");
    }

    function getEmbedURL(url) {
      if (url.includes("youtube.com/watch?v=")) {
        const id = url.split("v=")[1].split("&")[0];
        return `https://www.youtube.com/embed/${id}`;
      }
      if (url.includes("youtu.be/")) {
        const id = url.split("youtu.be/")[1].split("?")[0];
        return `https://www.youtube.com/embed/${id}`;
      }
      if (url.includes("ok.ru/video/")) {
        const id = url.split("video/")[1];
        return `https://ok.ru/videoembed/${id}`;
      }
      if (url.includes("streamtape.com")) {
        return url.replace("/v/", "/e/");
      }
      if (url.includes("streamwish")) {
        return url.replace("/f/", "/e/");
      }
      if (url.includes("mega.nz/file/")) {
        return url.replace("/file/", "/embed/");
      }
      return url; // Steam o directos
    }

    function renderMedia(index) {
      const item = data.imagenes[index];
      sliderContent.innerHTML = "";

      if (isVideo(item.page)) {
        const embedUrl = getEmbedURL(item.page);
        if (embedUrl.match(/youtube|ok\.ru|streamtape|streamwish|mega/)) {
          sliderContent.innerHTML = `<iframe src="${embedUrl}" allowfullscreen></iframe>`;
        } else {
          sliderContent.innerHTML = `<video src="${embedUrl}" controls></video>`;
        }
      } else {
        sliderContent.innerHTML = `<img src="${item.page}" alt="Imagen ${item.num}" onerror="this.src='https://via.placeholder.com/800x450?text=No+Disponible'">`;
      }

      updateThumbnails();
    }

    function updateThumbnails() {
      thumbnails.innerHTML = "";
      data.imagenes.forEach((item, i) => {
        const thumb = document.createElement("div");
        thumb.classList.add("thumbnail");
        if (i === index) thumb.classList.add("active");

        if (isVideo(item.page)) {
          thumb.innerHTML = `<img src="https://img.icons8.com/ios-filled/50/ffffff/play-button-circled.png" style="object-fit: contain; padding:10px;">`;
        } else {
          thumb.innerHTML = `<img src="${item.page}" alt="Mini ${item.num}" onerror="this.src='https://via.placeholder.com/120x70?text=No+Img'">`;
        }

        thumb.onclick = () => {
          index = i;
          renderMedia(index);
        };
        thumbnails.appendChild(thumb);
      });
    }

    document.querySelector(".prev").onclick = () => {
      index = (index - 1 + data.imagenes.length) % data.imagenes.length;
      renderMedia(index);
    };

    document.querySelector(".next").onclick = () => {
      index = (index + 1) % data.imagenes.length;
      renderMedia(index);
    };

    renderMedia(index);
  </script>
</body>
</html>
